{% extends "base.html" %}
{% block content %}
<h4 class="mb-3"><i class="bi bi-bar-chart text-primary"></i> Analytics & Statistics</h4>

<div class="row g-3">
    <div class="col-md-3">
        <div class="kpi-card">
            <small class="text-muted">Total Trades</small>
            <div class="kpi-value">{{ data.analytics.all_time.trades }}</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="kpi-card">
            <small class="text-muted">Win Rate</small>
            <div class="kpi-value text-success">
                {{ "%.1f"|format((data.analytics.all_time.wins / data.analytics.all_time.trades * 100) if data.analytics.all_time.trades > 0 else 0) }}%
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="kpi-card">
            <small class="text-muted">Total P&L</small>
            <div class="kpi-value {% if data.analytics.all_time.pnl >= 0 %}text-success{% else %}text-danger{% endif %}">
                ${{ "%.2f"|format(data.analytics.all_time.pnl or 0) }}
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="kpi-card">
            <small class="text-muted">Avg Trade</small>
            <div class="kpi-value">
                ${{ "%.2f"|format((data.analytics.all_time.pnl / data.analytics.all_time.trades) if data.analytics.all_time.trades > 0 else 0) }}
            </div>
        </div>
    </div>
</div>

<div class="row g-3 mt-1">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header"><i class="bi bi-calendar-day"></i> Today's Performance</div>
            <div class="card-body">
                <div class="d-flex justify-content-between mb-2">
                    <span>Trades:</span>
                    <strong>{{ data.analytics.daily.trades }}</strong>
                </div>
                <div class="d-flex justify-content-between">
                    <span>P&L:</span>
                    <strong class="{% if data.analytics.daily.pnl >= 0 %}text-success{% else %}text-danger{% endif %}">
                        ${{ "%.2f"|format(data.analytics.daily.pnl or 0) }}
                    </strong>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header"><i class="bi bi-calendar-week"></i> Weekly Performance</div>
            <div class="card-body">
                <div class="d-flex justify-content-between mb-2">
                    <span>Trades:</span>
                    <strong>{{ data.analytics.weekly.trades }}</strong>
                </div>
                <div class="d-flex justify-content-between">
                    <span>P&L:</span>
                    <strong class="{% if data.analytics.weekly.pnl >= 0 %}text-success{% else %}text-danger{% endif %}">
                        ${{ "%.2f"|format(data.analytics.weekly.pnl or 0) }}
                    </strong>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header"><i class="bi bi-graph-up-arrow"></i> Profit Curve</div>
    <div class="card-body">
        <div style="height: 200px; background: linear-gradient(180deg, rgba(57,211,83,0.1) 0%, transparent 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
            <span class="text-muted"><i class="bi bi-graph-up"></i> Profit chart visualization placeholder</span>
        </div>
    </div>
</div>
{% endblock %}
